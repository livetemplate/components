{{define "lvt:dropdown:default:v1"}}
{{if .IsStyled}}
{{/* Tailwind CSS styled version */}}
<div class="relative inline-block w-full" data-dropdown="{{.ID}}">
  <button
    type="button"
    class="w-full px-4 py-2 text-left bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed"
    lvt-click="toggle_{{.ID}}"
    {{if .Disabled}}disabled{{end}}
    aria-haspopup="listbox"
    aria-expanded="{{.Open}}"
  >
    <span class="block truncate">
      {{if .Selected}}{{.Selected.Label}}{{else}}{{.Placeholder}}{{end}}
    </span>
    <span class="absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none">
      <svg class="w-5 h-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
      </svg>
    </span>
  </button>

  {{if .Open}}
  <div
    class="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto"
    lvt-click-away="close_{{.ID}}"
    lvt-focus-trap
    role="listbox"
  >
    {{range .Options}}
    <div
      class="px-4 py-2 cursor-pointer hover:bg-blue-50 {{if .Disabled}}opacity-50 cursor-not-allowed{{end}} {{if eq $.Selected.Value .Value}}bg-blue-100{{end}}"
      lvt-click="select_{{$.ID}}"
      lvt-data-value="{{.Value}}"
      role="option"
      {{if .Disabled}}aria-disabled="true"{{end}}
      {{if eq $.Selected.Value .Value}}aria-selected="true"{{end}}
    >
      {{.Label}}
    </div>
    {{end}}
  </div>
  {{end}}
</div>
{{else}}
{{/* Unstyled semantic HTML version */}}
<div data-dropdown="{{.ID}}">
  <button
    type="button"
    lvt-click="toggle_{{.ID}}"
    {{if .Disabled}}disabled{{end}}
    aria-haspopup="listbox"
    aria-expanded="{{.Open}}"
  >
    {{if .Selected}}{{.Selected.Label}}{{else}}{{.Placeholder}}{{end}}
  </button>

  {{if .Open}}
  <div lvt-click-away="close_{{.ID}}" lvt-focus-trap role="listbox">
    {{range .Options}}
    <div
      lvt-click="select_{{$.ID}}"
      lvt-data-value="{{.Value}}"
      role="option"
      {{if .Disabled}}aria-disabled="true"{{end}}
    >
      {{.Label}}
    </div>
    {{end}}
  </div>
  {{end}}
</div>
{{end}}
{{end}}
