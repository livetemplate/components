{{define "lvt:menu:nav:v1"}}
{{if .IsStyled}}
{{/* Tailwind CSS styled version */}}
<nav class="{{if eq .Orientation "vertical"}}flex flex-col space-y-1{{else}}flex items-center space-x-1{{end}}" data-menu="{{.ID}}" data-nav="true">
  {{range $item := .Items}}
  {{if $item.IsDivider}}
  {{if eq $.Orientation "vertical"}}
  <hr class="my-2 border-gray-200" />
  {{else}}
  <div class="h-6 w-px bg-gray-200"></div>
  {{end}}
  {{else if $item.IsHeader}}
  <div class="px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider">
    {{$item.Label}}
  </div>
  {{else if $item.IsSubmenu}}
  <div class="relative">
    <button
      type="button"
      class="flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-md
        {{if $item.Active}}bg-gray-100 text-gray-900{{else}}text-gray-700 hover:bg-gray-100 hover:text-gray-900{{end}}"
      lvt-click="toggle_submenu_{{$.ID}}"
      lvt-data-submenu="{{$item.ID}}"
      aria-expanded="{{$.IsSubmenuOpen $item.ID}}"
      aria-haspopup="true"
    >
      {{if $item.HasIcon}}<span>{{$item.Icon}}</span>{{end}}
      {{$item.Label}}
      <svg class="w-4 h-4 {{if $.IsSubmenuOpen $item.ID}}rotate-180{{end}}" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
      </svg>
    </button>
    {{if $.IsSubmenuOpen $item.ID}}
    <div
      class="{{if eq $.Orientation "vertical"}}pl-4 mt-1 space-y-1{{else}}absolute left-0 mt-1 w-48 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 py-1{{end}}"
      lvt-click-away="close_submenu_{{$.ID}}"
    >
      {{range $subItem := $item.Items}}
      {{if $subItem.IsLink}}
      <a
        href="{{$subItem.Href}}"
        {{if $subItem.Target}}target="{{$subItem.Target}}"{{end}}
        class="block px-3 py-2 text-sm {{if $subItem.Active}}bg-gray-100 text-gray-900 font-medium{{else if $subItem.Disabled}}text-gray-400 cursor-not-allowed{{else}}text-gray-700 hover:bg-gray-100 hover:text-gray-900{{end}} rounded-md"
      >
        {{if $subItem.HasIcon}}<span class="mr-2">{{$subItem.Icon}}</span>{{end}}
        {{$subItem.Label}}
      </a>
      {{else}}
      <button
        type="button"
        class="block w-full text-left px-3 py-2 text-sm {{if $subItem.Active}}bg-gray-100 text-gray-900 font-medium{{else if $subItem.Disabled}}text-gray-400 cursor-not-allowed{{else}}text-gray-700 hover:bg-gray-100 hover:text-gray-900{{end}} rounded-md"
        {{if not $subItem.Disabled}}
        lvt-click="select_{{$.ID}}"
        lvt-data-item="{{$subItem.ID}}"
        {{end}}
        {{if $subItem.Disabled}}disabled{{end}}
      >
        {{if $subItem.HasIcon}}<span class="mr-2">{{$subItem.Icon}}</span>{{end}}
        {{$subItem.Label}}
      </button>
      {{end}}
      {{end}}
    </div>
    {{end}}
  </div>
  {{else if $item.IsLink}}
  <a
    href="{{$item.Href}}"
    {{if $item.Target}}target="{{$item.Target}}"{{end}}
    class="flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-md
      {{if $item.Active}}bg-gray-100 text-gray-900{{else if $item.Disabled}}text-gray-400 cursor-not-allowed{{else}}text-gray-700 hover:bg-gray-100 hover:text-gray-900{{end}}"
    {{if $item.Disabled}}aria-disabled="true"{{end}}
  >
    {{if $item.HasIcon}}<span>{{$item.Icon}}</span>{{end}}
    {{$item.Label}}
    {{if $item.HasBadge}}
    <span class="ml-auto px-2 py-0.5 text-xs rounded-full
      {{if eq $item.BadgeColor "red"}}bg-red-100 text-red-700{{else if eq $item.BadgeColor "blue"}}bg-blue-100 text-blue-700{{else}}bg-gray-100 text-gray-700{{end}}">
      {{$item.Badge}}
    </span>
    {{end}}
  </a>
  {{else}}
  <button
    type="button"
    class="flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-md
      {{if $item.Active}}bg-gray-100 text-gray-900{{else if $item.Disabled}}text-gray-400 cursor-not-allowed{{else}}text-gray-700 hover:bg-gray-100 hover:text-gray-900{{end}}"
    {{if not $item.Disabled}}
    lvt-click="select_{{$.ID}}"
    lvt-data-item="{{$item.ID}}"
    {{end}}
    {{if $item.Disabled}}disabled{{end}}
  >
    {{if $item.HasIcon}}<span>{{$item.Icon}}</span>{{end}}
    {{$item.Label}}
    {{if $item.HasBadge}}
    <span class="ml-auto px-2 py-0.5 text-xs rounded-full
      {{if eq $item.BadgeColor "red"}}bg-red-100 text-red-700{{else if eq $item.BadgeColor "blue"}}bg-blue-100 text-blue-700{{else}}bg-gray-100 text-gray-700{{end}}">
      {{$item.Badge}}
    </span>
    {{end}}
  </button>
  {{end}}
  {{end}}
</nav>
{{else}}
{{/* Unstyled semantic HTML version */}}
<nav data-menu="{{.ID}}" data-nav="true">
  <ul class="{{if eq .Orientation "vertical"}}vertical{{else}}horizontal{{end}}">
    {{range $item := .Items}}
    {{if $item.IsDivider}}
    <li role="separator"><hr /></li>
    {{else if $item.IsHeader}}
    <li><strong>{{$item.Label}}</strong></li>
    {{else if $item.IsSubmenu}}
    <li>
      <button
        type="button"
        lvt-click="toggle_submenu_{{$.ID}}"
        lvt-data-submenu="{{$item.ID}}"
        aria-expanded="{{$.IsSubmenuOpen $item.ID}}"
      >
        {{$item.Label}}
      </button>
      {{if $.IsSubmenuOpen $item.ID}}
      <ul lvt-click-away="close_submenu_{{$.ID}}">
        {{range $subItem := $item.Items}}
        <li>
          {{if $subItem.IsLink}}
          <a href="{{$subItem.Href}}">{{$subItem.Label}}</a>
          {{else}}
          <button
            type="button"
            {{if not $subItem.Disabled}}
            lvt-click="select_{{$.ID}}"
            lvt-data-item="{{$subItem.ID}}"
            {{end}}
            {{if $subItem.Disabled}}disabled{{end}}
          >
            {{$subItem.Label}}
          </button>
          {{end}}
        </li>
        {{end}}
      </ul>
      {{end}}
    </li>
    {{else}}
    <li>
      {{if $item.IsLink}}
      <a href="{{$item.Href}}" {{if $item.Active}}aria-current="page"{{end}}>{{$item.Label}}</a>
      {{else}}
      <button
        type="button"
        {{if not $item.Disabled}}
        lvt-click="select_{{$.ID}}"
        lvt-data-item="{{$item.ID}}"
        {{end}}
        {{if $item.Disabled}}disabled{{end}}
        {{if $item.Active}}aria-current="page"{{end}}
      >
        {{$item.Label}}
      </button>
      {{end}}
    </li>
    {{end}}
    {{end}}
  </ul>
</nav>
{{end}}
{{end}}
