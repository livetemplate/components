{{define "lvt:datepicker:single:v1"}}
{{if .IsStyled}}
{{/* Tailwind CSS styled version */}}
<div class="relative inline-block" data-datepicker="{{.ID}}">
  <button
    type="button"
    class="w-full px-4 py-2 text-left bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
    lvt-click="toggle_datepicker_{{.ID}}"
    aria-haspopup="dialog"
    aria-expanded="{{.Open}}"
  >
    <span class="flex items-center justify-between">
      <span class="{{if not .Selected}}text-gray-400{{end}}">{{.DisplayValue}}</span>
      <svg class="w-5 h-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" />
      </svg>
    </span>
  </button>

  {{if .Open}}
  <div
    class="absolute z-10 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg p-4"
    lvt-click-away="close_datepicker_{{.ID}}"
    role="dialog"
    aria-modal="true"
    aria-label="Choose date"
  >
    {{template "lvt:datepicker:calendar" .}}
  </div>
  {{end}}
</div>
{{else}}
{{/* Unstyled semantic HTML version */}}
<div data-datepicker="{{.ID}}">
  <button
    type="button"
    lvt-click="toggle_datepicker_{{.ID}}"
    aria-haspopup="dialog"
    aria-expanded="{{.Open}}"
  >
    {{.DisplayValue}}
  </button>

  {{if .Open}}
  <div lvt-click-away="close_datepicker_{{.ID}}" role="dialog" aria-modal="true">
    {{template "lvt:datepicker:calendar" .}}
  </div>
  {{end}}
</div>
{{end}}
{{end}}

{{define "lvt:datepicker:calendar"}}
{{if .IsStyled}}
<div class="w-64">
  <div class="flex items-center justify-between mb-4">
    <button
      type="button"
      class="p-1 hover:bg-gray-100 rounded"
      lvt-click="prev_month_{{.ID}}"
      aria-label="Previous month"
    >
      <svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
      </svg>
    </button>
    <span class="font-semibold text-gray-900">
      {{.ViewMonth}} {{.ViewYear}}
    </span>
    <button
      type="button"
      class="p-1 hover:bg-gray-100 rounded"
      lvt-click="next_month_{{.ID}}"
      aria-label="Next month"
    >
      <svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
      </svg>
    </button>
  </div>

  <div class="grid grid-cols-7 gap-1 mb-2">
    {{range .WeekdayNames}}
    <div class="text-center text-xs font-medium text-gray-500 py-1">{{.}}</div>
    {{end}}
  </div>

  {{range .CalendarWeeks}}
  <div class="grid grid-cols-7 gap-1">
    {{range .}}
    <button
      type="button"
      class="w-8 h-8 text-sm rounded-full flex items-center justify-center
        {{if not .InMonth}}text-gray-300{{else if .IsDisabled}}text-gray-300 cursor-not-allowed{{else if .IsSelected}}bg-blue-600 text-white{{else if .IsToday}}border border-blue-600 text-blue-600{{else}}text-gray-700 hover:bg-gray-100{{end}}"
      {{if and .InMonth (not .IsDisabled)}}
      lvt-click="select_date_{{$.ID}}"
      lvt-data-date="{{.DateString}}"
      {{else}}
      disabled
      {{end}}
    >
      {{.Day}}
    </button>
    {{end}}
  </div>
  {{end}}

  <div class="flex justify-between mt-4 pt-4 border-t border-gray-200">
    <button
      type="button"
      class="text-sm text-blue-600 hover:text-blue-700"
      lvt-click="today_{{.ID}}"
    >
      Today
    </button>
    {{if .Selected}}
    <button
      type="button"
      class="text-sm text-gray-500 hover:text-gray-700"
      lvt-click="clear_date_{{.ID}}"
    >
      Clear
    </button>
    {{end}}
  </div>
</div>
{{else}}
<div>
  <div>
    <button type="button" lvt-click="prev_month_{{.ID}}">&lt;</button>
    <span>{{.ViewMonth}} {{.ViewYear}}</span>
    <button type="button" lvt-click="next_month_{{.ID}}">&gt;</button>
  </div>

  <table>
    <thead>
      <tr>
        {{range .WeekdayNames}}<th>{{.}}</th>{{end}}
      </tr>
    </thead>
    <tbody>
      {{range .CalendarWeeks}}
      <tr>
        {{range .}}
        <td>
          {{if and .InMonth (not .IsDisabled)}}
          <button
            type="button"
            lvt-click="select_date_{{$.ID}}"
            lvt-data-date="{{.DateString}}"
          >{{.Day}}</button>
          {{else}}
          <span>{{.Day}}</span>
          {{end}}
        </td>
        {{end}}
      </tr>
      {{end}}
    </tbody>
  </table>

  <div>
    <button type="button" lvt-click="today_{{.ID}}">Today</button>
    {{if .Selected}}
    <button type="button" lvt-click="clear_date_{{.ID}}">Clear</button>
    {{end}}
  </div>
</div>
{{end}}
{{end}}
