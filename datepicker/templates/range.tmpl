{{define "lvt:datepicker:range:v1"}}
{{if .IsStyled}}
{{/* Tailwind CSS styled version */}}
<div class="relative inline-block" data-datepicker="{{.ID}}" data-range="true">
  <button
    type="button"
    class="w-full px-4 py-2 text-left bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
    lvt-click="toggle_datepicker_{{.ID}}"
    aria-haspopup="dialog"
    aria-expanded="{{.Open}}"
  >
    <span class="flex items-center justify-between">
      <span class="{{if not .StartDate}}text-gray-400{{end}}">{{.DisplayRangeValue}}</span>
      <svg class="w-5 h-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" />
      </svg>
    </span>
  </button>

  {{if .Open}}
  <div
    class="absolute z-10 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg p-4"
    lvt-click-away="close_datepicker_{{.ID}}"
    role="dialog"
    aria-modal="true"
    aria-label="Choose date range"
  >
    <p class="text-sm text-gray-500 mb-3">
      {{if .SelectingEnd}}Select end date{{else}}Select start date{{end}}
    </p>
    {{template "lvt:datepicker:calendar" .DatePicker}}
    {{if .StartDate}}
    <div class="flex justify-end mt-4 pt-4 border-t border-gray-200">
      <button
        type="button"
        class="text-sm text-gray-500 hover:text-gray-700"
        lvt-click="clear_range_{{.ID}}"
      >
        Clear range
      </button>
    </div>
    {{end}}
  </div>
  {{end}}
</div>
{{else}}
{{/* Unstyled semantic HTML version */}}
<div data-datepicker="{{.ID}}" data-range="true">
  <button
    type="button"
    lvt-click="toggle_datepicker_{{.ID}}"
    aria-haspopup="dialog"
    aria-expanded="{{.Open}}"
  >
    {{.DisplayRangeValue}}
  </button>

  {{if .Open}}
  <div lvt-click-away="close_datepicker_{{.ID}}" role="dialog" aria-modal="true">
    <p>{{if .SelectingEnd}}Select end date{{else}}Select start date{{end}}</p>
    {{template "lvt:datepicker:calendar" .DatePicker}}
    {{if .StartDate}}
    <button type="button" lvt-click="clear_range_{{.ID}}">Clear range</button>
    {{end}}
  </div>
  {{end}}
</div>
{{end}}
{{end}}
